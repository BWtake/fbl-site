---
title: Staking Baskets GitHub解析レポート（完全版）
date: 2025-08-13
epoch: 576
tags:
  - Cardano
  - Project-Catalyst
  - Staking
  - DRep
  - Atma-DAO
---

## 概要
Atma DAO が Project Catalyst 採択案件の成果物として開発した「**Staking Baskets**」の GitHub リポジトリを解析した。本プロトコルは、ADA ステーキングの分散化とリスク管理を目的としており、単一SPO依存を減らし、複数プールや複数戦略への委任を可能にするオープンソース実装である。Catalyst資金による部分的な開発支援を受けており、リポジトリは Apache-2.0 ライセンスで公開されている。

---

## リポジトリ構造と役割

| パス/ファイル | 役割 | 補足 |
|---|---|---|
| `/onchain/` | スマートコントラクト本体（Haskell/Plutarch） | 入金・引出・トークン発行、ロック/アンロック、再配分のバリデータやミンティングポリシー等 |
| `/docs/` | 技術文書・設計資料 | 設計仕様や統合ガイド、Catalyst納品資料を含む想定 |
| `/nix/` `flake.nix` `default.nix` `shell.nix` | Nixによる開発環境構築 | 依存の固定化・再現可能ビルドを保証 |
| `README.md` | プロトコル概要・仕様説明 | バスケット構造、ロック機構、監査、ライセンス等の記載あり |
| `LICENSE` | Apache-2.0 | 商用利用可、改変可、クレジット表記義務あり |

---

## READMEから読み取れる仕様の要点

- **分散ステーキング**  
  単一の「バスケット」にADAを預けることで、複数SPOに分散委任可能。報酬や可用性の変動リスクを低減。

- **バスケットトークン（Basket Token）**  
  預入時に交換レートに応じて発行され、報酬の蓄積に伴って交換レートは**単調増加（下がらない）**。このトークンは引出し時にバーンされ、現在のレートに基づくADAが返還される。

- **元本引出し保護**  
  バスケットがロックされていない限り、預けたADAは全額引出し可能。プロトコル側で十分な流動性を確保。

- **ロック機構**  
  管理者が再配分やレート更新などの操作を行う際にはバスケットをロック。最大ロック時間を超えると誰でもアンロック可能。

- **監査**  
  Anastasia Labs による監査済み。監査の対象バージョンと実稼働コードの一致確認が推奨される。

- **ライセンス**  
  Apache-2.0（商用含め再利用可、条件あり）

---

## 仕組みの動作フロー（テキスト図解）

1. ユーザーがADAを**Deposit**  
   → 預入時点の交換レートでバスケットトークンを発行。
2. ステーキング報酬の発生  
   → バスケット全体のADA残高が増加、交換レートは上昇。
3. ユーザーが**Withdraw**  
   → バスケットトークンをバーンし、現在レート×保有量のADAを受け取る。
4. 管理者操作時は**ロック状態**  
   → 最大時間を超えると誰でも解除可能。

---

## 想定ディレクトリ詳細（推測構造）

| パス | 想定内容 |
|---|---|
| `onchain/Validators/*.hs` | 入金・引出・バスケットトークン発行・ロック/アンロックを管理するValidator |
| `onchain/Types/*.hs` | Datum/Redeemer/Script Context等の型定義 |
| `onchain/Policies/*.hs` | バスケットトークンのミンティング/バーンポリシー |
| `onchain/Offchain/*.hs` | テスト用トランザクション構築ユーティリティ |
| `docs/*.md` | 設計仕様書、APIリファレンス、統合ガイド |

---

## DRep視点でのリスク・留意点

- **管理者権限モデルの透明化**  
  再配分やレート更新の権限を持つ主体の設定方法。マルチシグ化やガバナンス連動が望ましい。

- **ロック機構のパラメータ調整**  
  最大ロック時間と解除条件の設計は、DoS回避と安全性のトレードオフとなる。

- **監査の範囲とコード一致性**  
  公開されている監査報告の対象コミットと、本番稼働コードが一致しているか確認が必要。

---

## 推奨次ステップ

1. `onchain`配下のファイルを解析し、関数一覧と依存関係グラフを作成する。  
2. Catalyst提案時の要件（Multi-dRep/複数SPO委任）と実装仕様を突合する。  
3. 監査レポートの詳細確認（Anastasia Labs 公開物があれば取得・検証）。  

---

### 出典
- GitHubリポジトリ README・ディレクトリ情報（監査・特徴・構成、Apache-2.0）
- Catalyst提案ページのオープンソース化方針・Multi-dRep方向性記述


---

作成日時: 2025-08-13
